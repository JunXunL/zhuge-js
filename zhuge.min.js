!function(){var e=Array.prototype,t=Object.prototype,n=e.slice,i=t.toString,r=t.hasOwnProperty,o=window.console,s=window.navigator,a=window.document,c=s.userAgent,u={},f="1.2",p="https:"==a.location.protocol?"https://":"http://",h=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,d=!1,l={api_host:p+"apipool.37degree.com/web_event/?method=web_event_srv.upload",debug:!1,ping:!1,ping_interval:12e3,idle_timeout:3e5,idle_threshold:1e4,track_link_timeout:300,cookie_expire_days:365,cookie_cross_subdomain:!0,cookie_secure:!1,info_upload_interval_days:7,session_interval_mins:30,app_channel:"web",app_version:"1.0"};!function(){var t=e.forEach,o=Array.isArray,s={};u.each=function(e,n,i){if(null!=e)if(t&&e.forEach===t)e.forEach(n,i);else if(e.length===+e.length){for(var o=0,a=e.length;a>o;o++)if(o in e&&n.call(i,e[o],o,e)===s)return}else for(var c in e)if(r.call(e,c)&&n.call(i,e[c],c,e)===s)return},u.extend=function(e){return u.each(n.call(arguments,1),function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e},u.isUndefined=function(e){return void 0===e},u.isString=function(e){return"[object String]"==i.call(e)},u.isArray=o||function(e){return"[object Array]"===i.call(e)},u.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(t){return!1}},u.isObject=function(e){return e===Object(e)&&!u.isArray(e)},u.includes=function(e,t){return-1!==e.indexOf(t)}}(),u.truncate=function(e,t){var n;return"string"==typeof e?n=e.slice(0,t):u.isArray(e)?(n=[],u.each(e,function(e){n.push(u.truncate(e,t))})):u.isObject(e)?(n={},u.each(e,function(e,i){n[i]=u.truncate(e,t)})):n=e,n},u.strip_empty_properties=function(e){var t={};return u.each(e,function(e,n){u.isString(e)&&e.length>0&&(t[n]=e)}),t},u.JSONEncode=function(){return function(e){var t=e,n=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},o=function(e,t){var s="",a="    ",c=0,u="",f="",p=0,h=s,d=[],l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),typeof l){case"string":return n(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(s+=a,d=[],"[object Array]"===i.apply(l)){for(p=l.length,c=0;p>c;c+=1)d[c]=o(c,l)||"null";return f=0===d.length?"[]":s?"[\n"+s+d.join(",\n"+s)+"\n"+h+"]":"["+d.join(",")+"]",s=h,f}for(u in l)r.call(l,u)&&(f=o(u,l),f&&d.push(n(u)+(s?": ":":")+f));return f=0===d.length?"{}":s?"{"+d.join(",")+h+"}":"{"+d.join(",")+"}",s=h,f}};return o("",{"":t})}}(),u.JSONDecode=function(){var e,t,n,i,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},o=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},s=function(i){return i&&i!==t&&o("Expected '"+i+"' instead of '"+t+"'"),t=n.charAt(e),e+=1,t},a=function(){var e,n="";for("-"===t&&(n="-",s("-"));t>="0"&&"9">=t;)n+=t,s();if("."===t)for(n+=".";s()&&t>="0"&&"9">=t;)n+=t;if("e"===t||"E"===t)for(n+=t,s(),("-"===t||"+"===t)&&(n+=t,s());t>="0"&&"9">=t;)n+=t,s();return e=+n,isFinite(e)?e:void o("Bad number")},c=function(){var e,n,i,a="";if('"'===t)for(;s();){if('"'===t)return s(),a;if("\\"===t)if(s(),"u"===t){for(i=0,n=0;4>n&&(e=parseInt(s(),16),isFinite(e));n+=1)i=16*i+e;a+=String.fromCharCode(i)}else{if("string"!=typeof r[t])break;a+=r[t]}else a+=t}o("Bad string")},u=function(){for(;t&&" ">=t;)s()},f=function(){switch(t){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}o("Unexpected '"+t+"'")},p=function(){var e=[];if("["===t){if(s("["),u(),"]"===t)return s("]"),e;for(;t;){if(e.push(i()),u(),"]"===t)return s("]"),e;s(","),u()}}o("Bad array")},h=function(){var e,n={};if("{"===t){if(s("{"),u(),"}"===t)return s("}"),n;for(;t;){if(e=c(),u(),s(":"),Object.hasOwnProperty.call(n,e)&&o('Duplicate key "'+e+'"'),n[e]=i(),u(),"}"===t)return s("}"),n;s(","),u()}}o("Bad object")};return i=function(){switch(u(),t){case"{":return h();case"[":return p();case'"':return c();case"-":return a();default:return t>="0"&&"9">=t?a():f()}},function(r){var s;return n=r,e=0,t=" ",s=i(),u(),t&&o("Syntax error"),s}}(),u.HTTPBuildQuery=function(e,t){var n,i,r=[];return"undefined"==typeof t&&(t="&"),u.each(e,function(e,t){n=encodeURIComponent(e.toString()),i=encodeURIComponent(t),r[r.length]=i+"="+n}),r.join(t)},u.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&#]"+t+"=([^&#]*)",i=new RegExp(n),r=i.exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")},u.register_event=function(){function e(e,n,i){var r=function(r){if(r=r||t(window.event),!r)return void 0;var o,s,a=!0;return u.isFunction(i)&&(o=i(r)),s=n.call(e,r),(!1===o||!1===s)&&(a=!1),a};return r}function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}var n=function(t,n,i,r){if(!t)return void g.error("No valid element provided to register_event");if(t.addEventListener&&!r)t.addEventListener(n,i,!1);else{var o="on"+n,s=t[o];t[o]=e(t,i,s)}};return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},n}(),u.cookie={get:function(e){for(var t=e+"=",n=a.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return null},parse:function(e){var t;try{t=u.JSONDecode(u.cookie.get(e))||{}}catch(n){}return t},set:function(e,t,n,i,r){var o="",s="",c="";if(i){var u=a.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),f=u?u[0]:"";o=f?"; domain=."+f:""}if(n){var p=new Date;p.setTime(p.getTime()+24*n*60*60*1e3),s="; expires="+p.toGMTString()}r&&(c="; secure"),a.cookie=e+"="+encodeURIComponent(t)+s+"; path=/"+o+c},remove:function(e,t){u.cookie.set(e,"",-1,t)}},u.UUID=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},n=function(){function e(e,t){var n,i=0;for(n=0;n<t.length;n++)i|=r[n]<<8*n;return e^i}var t,n,i=c,r=[],o=0;for(t=0;t<i.length;t++)n=i.charCodeAt(t),r.unshift(255&n),r.length>=4&&(o=e(o,r),r=[]);return r.length>0&&(o=e(o,r)),o.toString(16)};return function(){var i=(screen.height*screen.width).toString(16);return e()+"-"+t()+"-"+n()+"-"+i+"-"+e()}}(),u.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",n={};return u.each(e,function(e){t=u.getQueryParam(a.URL,e),t.length&&(n[e]=t)}),n},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)baidu.com")?"baidu":0===e.search("https?://(.*)sogou.com")?"sogou":0===e.search("https?://(.*)haosou.com")?"haosou":null},searchKeyword:function(e){var t=u.info.searchEngine(e);return"google"==t?u.getQueryParam(e,"q"):"baidu"==t?u.getQueryParam(e,"wd"):"sogou"==t?u.getQueryParam(e,"query"):"haosou"==t?u.getQueryParam(e,"q"):null},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},browser:function(e,t,n){var t=t||"";return n?u.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":u.includes(e,"FBIOS")?"Facebook Mobile":u.includes(e,"Chrome")?"Chrome":u.includes(e,"CriOS")?"Chrome iOS":u.includes(t,"Apple")?u.includes(e,"Mobile")?"Mobile Safari":"Safari":u.includes(e,"Android")?"Android Mobile":u.includes(e,"Konqueror")?"Konqueror":u.includes(e,"Firefox")?"Firefox":u.includes(e,"MSIE")||u.includes(e,"Trident/")?"Internet Explorer":u.includes(e,"Gecko")?"Mozilla":""},os:function(){var e=c;return/Windows/i.test(e)?/Phone/.test(e)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":""},device:function(e){return/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Windows Phone/i.test(e)?"Windows Phone":/Android/.test(e)?"Android":""},resolution:function(){return screen.width+"*"+screen.height},properties:function(){var e=a.referrer;return u.strip_empty_properties({os:u.info.os(),br:u.info.browser(c,s.vendor,window.opera),dv:u.info.device(c),rs:u.info.resolution(),search:u.info.searchEngine(e),keyword:u.info.searchKeyword(e),url:a.URL,referrer:e,referrer_domain:u.info.referringDomain(e)})}};var g={log:function(){if(d&&!u.isUndefined(o)&&o)try{o.log.apply(o,arguments)}catch(e){u.each(arguments,function(e){o.log(e)})}},error:function(){if(d&&!u.isUndefined(o)&&o){var e=["Zhuge error:"].concat(u.toArray(arguments));try{o.error.apply(o,e)}catch(t){u.each(e,function(e){o.error(e)})}}}},v=function(e){this.name="_zg",this.props={},this.config=u.extend({},e),this.load()};v.prototype.load=function(){var e=u.cookie.parse(this.name);e&&(this.props=u.extend({},e))},v.prototype.save=function(){u.cookie.set(this.name,u.JSONEncode(this.props),this.config.cookie_expire_days,this.config.cookie_cross_subdomain,this.config.cookie_secure)},v.prototype.register_once=function(e,t){return u.isObject(e)?("undefined"==typeof t&&(t="None"),u.each(e,function(e,n){this.props[n]&&this.props[n]!==t||(this.props[n]=e)},this),this.save(),!0):!1},v.prototype.register=function(e){return u.isObject(e)?(u.extend(this.props,e),this.save(),!0):!1};var y=function(){this.config={},u.extend(this.config,l),this.idle=0,this.last_activity=new Date};y.prototype._init=function(e,t){this._key=e,this._jsc=function(){},u.isObject(t)&&(u.extend(this.config,t),d=d||this.config.debug),this.cookie=new v(this.config),this.cookie.register_once({uuid:u.UUID(),sid:0,updated:0,info:0},""),this._session(),this._info(),this._startPing()},y.prototype._session=function(){var e=this.cookie.props.updated,t=this.cookie.props.sid,n=1*new Date/1e3;if(0==t||n>e+60*this.config.session_interval_mins){if(t>0&&e>0){var i={};i.et="se",i.sid=t,i.dr=Math.round(1e3*(e-t))/1e3,this._batchTrack(i)}t=n;var r={};r.et="ss",r.sid=t,r.cn=this.config.app_channel,r.vn=this.config.app_version,r.pr=u.extend(u.info.properties(),u.info.campaignParams()),this._batchTrack(r),this.cookie.register({sid:t},"")}this.cookie.register({updated:n},"")},y.prototype._info=function(){var e=this.cookie.props.info,t=1*new Date;if(t>e+24*this.config.info_upload_interval_days*60*60*1e3){var n={};n.et="info",n.pr=u.extend(u.info.properties(),{cn:this.config.app_channel,vn:this.config.app_version}),this._batchTrack(n),this.cookie.register({info:t},"")}},y.prototype.debug=function(e){d=e},y.prototype.identify=function(e,t,n){this.cookie.register({cuid:e},""),this._session();var i={};i.et="idf",i.cuid=e,i.pr=t,i.sid=this.cookie.props.sid,this._batchTrack(i,n)},y.prototype.page=function(e,t){this._session();var n=a.location.href,i={};i.et="pg",i.pid=n,i.pn="undefined"==typeof e?n:e,i.tl=a.title,i.ref=a.referrer,i.sid=this.cookie.props.sid,this._batchTrack(i,t)},y.prototype.track=function(e,t,n){this._session();var i={};i.et="cus",i.eid=e,i.pr=t,i.sid=this.cookie.props.sid,this._batchTrack(i,n)},y.prototype.trackLink=function(e,t,n){if(!e)return this;u.isArray(e)||(e=[e]);var i=this;return u.each(e,function(e){var r=function(r){i.track(t,n),e.href&&"_blank"!==e.target&&!r.metaKey&&2!==r.which&&(r.preventDefault(),window.setTimeout(function(){window.location.href=e.href},this.config.track_link_timeout))};u.register_event(e,"click",r)}),this},y.prototype.trackForm=function(e,t,n){if(!e)return this;u.isArray(e)||(e=[e]);var i=this;return u.each(e,function(e){var r=function(r){r.preventDefault(),i.track(t,n),window.setTimeout(function(){e.submit()},TRACK_LINK_TIMEOUT)},o=window.jQuery||window.Zepto;o?o(e).submit(r):u.register_event(e,"submit",r)}),this},y.prototype._moved=function(){this.last_activity=new Date,this.idle=0},y.prototype._startPing=function(){var e=this;u.register_event(window,"mousemove",function(){e._moved.apply(e,arguments)}),"undefined"==typeof this.pingInterval&&(this.pingInterval=window.setInterval(function(){e._ping()},this.config.ping_interval))},y.prototype._stopPing=function(){"undefined"!=typeof this.pingInterval&&(window.clearInterval(this.pingInterval),delete this.pingInterval)},y.prototype._ping=function(){if(this.config.ping&&this.idle<this.config.idle_timeout){var e={};e.type="ping",e.sdk="web",e.sdkv=f,e.ak=this._key,e.did=this.cookie.props.uuid,e.cuid=this.cookie.props.cuid,this._sendTrackRequest(e)}else this._stopPing();var t=new Date;return t-this.last_activity>this.config.idle_threshold&&(this.idle=t-this.last_activity),this},y.prototype._batchTrack=function(e,t){var n={};n.type="statis",n.sdk="web",n.sdkv=f,n.cn=this.config.app_channel,n.vn=this.config.app_version,n.ak=this._key,n.did=this.cookie.props.uuid,n.cuid=this.cookie.props.cuid,n.ts=1*new Date/1e3;var i=[];i.push(e),n.data=i,this._sendTrackRequest(n,this._prepareCallback(t,n))},y.prototype._prepareCallback=function(e,t){if(u.isUndefined(e))return null;if(h){var n=function(n){e(n,t)};return n}var i=this._jsc,r=""+Math.floor(1e8*Math.random()),o='zhuge_jsc["'+r+'"]';return i[r]=function(n){delete i[r],e(n,t)},o},y.prototype._sendTrackRequest=function(e,t){var n=u.truncate(e,255),i=u.JSONEncode(n);g.log("ZHUGE REQUEST DATA:"),g.log(n),data={event:i,_:(new Date).getTime().toString()};var r=this.config.api_host+"&"+u.HTTPBuildQuery(data);this._sendRequest(r,t)},y.prototype._sendRequest=function(e,t){if(h){var n=new XMLHttpRequest;n.open("GET",e,!0),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState){if(200!==n.status){var e="Bad HTTP status: "+n.status+" "+n.statusText;g.error(e)}t&&t(n.status)}},n.send(null)}else{var i=a.createElement("script");i.type="text/javascript",i.async=!0,i.defer=!0,i.src=e;var r=a.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)}},y.prototype.push=function(e){var t=e.shift();this[t]&&this[t].apply(this,e)};for(var _=window.zhuge||[],m=new y;_&&_.length>0;){var k=_.shift(),w=k.shift();m[w]&&m[w].apply(m,k)}window.zhuge=m}();